@startuml

Alice -> TgSupportChat: sent message2


TgSupportChat -> TgBot: update event
TgBot -> TgBucket: read last message
TgBucket --> TgBot
...

TgBot -> TgBucket: upload new message

TgBot -> SharedBucket: read last message
SharedBucket --> TgBot

...

TgBot -> TgBot: merge tg history with shared list

TgBot -> SharedBucket: upload new state with message2

@enduml
